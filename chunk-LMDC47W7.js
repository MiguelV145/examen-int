import{a as X}from"./chunk-YSG2C4PS.js";import{a as Q}from"./chunk-B6QT5BOB.js";import"./chunk-N7LSAEK4.js";import"./chunk-63RLQJDC.js";import{a as z,b as g,c as A,d as H,e as G,g as B,h as $,i as q,j as O,n as J,p as K}from"./chunk-G2VJRUEM.js";import{$b as W,Ca as D,K as V,Na as c,P as h,Pa as u,Qa as L,Qb as R,Ra as N,Sa as T,T as v,Ta as y,U as x,Ua as i,V as b,Va as n,Vb as j,W as w,Wa as s,ab as U,da as f,db as _,fb as p,jb as I,lb as k,nb as l,oa as E,ob as P,pb as S,ra as a,z as M}from"./chunk-UHECLRXO.js";var F=class r{http=h(j);baseUrl=W.apiUrl.replace(/\/$/,"");getMyProfile(){return this.http.get(`${this.baseUrl}/api/profile/me`)}updateMyProfile(o){return this.http.put(`${this.baseUrl}/api/profile/me`,o)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};function ee(r,o){if(r&1&&s(0,"img",18),r&2){let e=p();y("src",e.previewUrl(),E)}}function te(r,o){if(r&1&&s(0,"img",19),r&2){let e,t=p();y("src",(e=t.profileForm.get("photoURL"))==null?null:e.value,E)}}function ie(r,o){if(r&1&&(i(0,"div",20)(1,"span",50),l(2),n()()),r&2){let e,t=p();a(2),P((e=t.user())==null||e.email==null||(e=e.email.charAt(0))==null?null:e.toUpperCase())}}function re(r,o){if(r&1&&(i(0,"div",36)(1,"span"),l(2),n()()),r&2){let e=p();a(2),S("\u2022 ",e.formUtils.getFieldError(e.profileForm,"displayName"))}}function ne(r,o){if(r&1&&(i(0,"div",36)(1,"span"),l(2),n()()),r&2){let e=p();a(2),S("\u2022 ",e.formUtils.getFieldError(e.profileForm,"specialty"))}}function oe(r,o){r&1&&(i(0,"div",41)(1,"span",51),l(2,"\u{1F3F7}\uFE0F"),n(),i(3,"span",52),l(4,"A\xF1ade tus mejores habilidades"),n()())}function ae(r,o){if(r&1){let e=U();i(0,"div",42)(1,"span",53),l(2),n(),i(3,"button",54),_("click",function(){let m=v(e).$implicit,d=p();return x(d.removeSkill(m))}),l(4,"\u2715"),n()()}if(r&2){let e=o.$implicit;a(2),P(e)}}function le(r,o){if(r&1&&(i(0,"div",36)(1,"span"),l(2),n()()),r&2){let e=p();a(2),S("\u2022 ",e.formUtils.getFieldError(e.profileForm,"description"))}}function se(r,o){if(r&1&&(i(0,"div",45),b(),i(1,"svg",55),s(2,"path",56),n(),w(),i(3,"span",57),l(4),n()()),r&2){let e=p();a(4),P(e.successMessage())}}function me(r,o){if(r&1&&(i(0,"div",46),b(),i(1,"svg",58),s(2,"path",59),n(),w(),i(3,"span",57),l(4),n()()),r&2){let e=p();a(4),P(e.errorMessage())}}function de(r,o){r&1&&s(0,"span",49)}var Y=class r{fb=h(J);authService=h(X);profileApi=h(F);loading=f(!1);successMessage=f("");errorMessage=f("");message=f("Perfil - Funcionalidad en construcci\xF3n. Conectar con backend cuando est\xE9 listo.");skills=f([]);previewUrl=f(null);user=this.authService.currentUser;skillInputCtrl=new G("",{nonNullable:!0});formUtils=Q;profileForm=this.fb.group({displayName:["",[g.required,g.minLength(3)]],specialty:["",[g.required,g.minLength(3)]],description:["",[g.required,g.minLength(10)]],photoURL:[""]});constructor(){}ngOnInit(){this.loadProfile()}loadProfile(){this.profileApi.getMyProfile().subscribe({next:o=>{o&&(this.profileForm.patchValue({displayName:o.displayName||"",specialty:o.specialty||"",description:o.description||"",photoURL:o.photoURL||""}),this.skills.set(o.skills||[]),o.photoURL&&this.previewUrl.set(o.photoURL))},error:o=>{console.error("Error al cargar perfil:",o)}})}addSkill(o){o.preventDefault();let e=(this.skillInputCtrl.value??"").trim();e&&(this.skills.update(t=>t.some(d=>d.toLowerCase()===e.toLowerCase())?t:[...t,e]),this.skillInputCtrl.setValue(""))}removeSkill(o){this.skills.update(e=>e.filter(t=>t!==o))}onFileSelected(o){let e=o.target.files[0];if(e){if(e.size>5e5){alert("La imagen es muy grande (M\xE1x 500KB).");return}let t=new FileReader;t.onload=m=>{let d=m.target?.result;this.previewUrl.set(d),this.profileForm.patchValue({photoURL:d})},t.readAsDataURL(e)}}saveProfile(){if(this.profileForm.invalid){this.profileForm.markAllAsTouched(),this.errorMessage.set("Por favor completa todos los campos requeridos."),setTimeout(()=>this.errorMessage.set(""),3e3);return}let o={displayName:this.profileForm.value.displayName||"",specialty:this.profileForm.value.specialty||"",description:this.profileForm.value.description||"",skills:this.skills(),photoURL:this.profileForm.value.photoURL||void 0};this.loading.set(!0),this.profileApi.updateMyProfile(o).pipe(M(()=>this.loading.set(!1))).subscribe({next:e=>{this.successMessage.set("\u2705 Perfil actualizado exitosamente"),e.photoURL&&(this.previewUrl.set(e.photoURL),this.profileForm.patchValue({photoURL:e.photoURL})),setTimeout(()=>this.successMessage.set(""),4e3)},error:e=>{let t=e?.error?.message||"Error al guardar el perfil. Intenta de nuevo.";this.errorMessage.set(`\u274C ${t}`),console.error("Error al guardar perfil:",e),setTimeout(()=>this.errorMessage.set(""),4e3)}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=D({type:r,selectors:[["app-programmer-page"]],decls:76,vars:17,consts:[["fileInput",""],[1,"min-h-screen","from-[#0f172a]","via-[#1e293b]","to-[#0f172a]","flex","justify-center","items-center","p-4","lg:p-10","font-sans","relative","overflow-hidden","pb-20"],[1,"absolute","top-0","left-1/2","w-[500px]","h-[500px]","bg-primary/20","rounded-full","blur-[120px]","-translate-x-1/2","-translate-y-1/2","pointer-events-none"],[1,"card","w-full","max-w-3xl","bg-[#1e293b]/40","backdrop-blur-xl","border","border-white/10","shadow-2xl","relative","z-10","animate-fade-in-up"],[1,"card-body","p-8","lg:p-12"],[1,"text-center","mb-10"],[1,"inline-flex","p-3","rounded-2xl","from-primary/20","to-secondary/20","mb-4","border","border-white/5","shadow-lg","shadow-primary/10"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-3xl","md:text-4xl","font-black","text-white","tracking-tight"],[1,"text-gray-400","mt-2","font-medium"],[3,"ngSubmit","formGroup"],[1,"flex","flex-col","items-center","mb-10"],["type","file","accept","image/png, image/jpeg, image/jpg",1,"hidden",3,"change"],["title","Clic para actualizar foto",1,"relative","group","cursor-pointer",3,"click"],[1,"absolute","-inset-1","from-primary","to-secondary","rounded-full","blur","opacity-20","group-hover:opacity-75","transition","duration-500"],[1,"avatar","placeholder","relative","z-10"],[1,"w-36","h-36","rounded-full","ring-4","ring-[#1e293b]","overflow-hidden","shadow-2xl","transition-transform","duration-300","group-hover:scale-[1.02]"],["alt","Preview",1,"object-cover","w-full","h-full",3,"src"],["alt","Foto Actual",1,"object-cover","w-full","h-full",3,"src"],[1,"from-gray-700","to-gray-900","text-white","w-full","h-full","flex","items-center","justify-center"],[1,"absolute","inset-0","bg-black/60","flex","flex-col","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-all","duration-300","backdrop-blur-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8","text-white","mb-1","transform","translate-y-2","group-hover:translate-y-0","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-white","text-xs","font-bold","tracking-widest","uppercase","transform","translate-y-2","group-hover:translate-y-0","transition-transform","duration-300","delay-75"],[1,"absolute","bottom-2","right-2","bg-primary","text-white","p-2","rounded-full","shadow-lg","border-2","border-[#1e293b]","z-20","group-hover:scale-110","transition-transform"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4"],["d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"],[1,"grid","gap-6"],[1,"form-control"],[1,"label","pl-1","pt-0"],[1,"label-text","text-gray-400","font-bold","text-xs","uppercase","tracking-wider"],[1,"relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-gray-500","group-focus-within:text-primary","transition-colors"],["type","text","formControlName","displayName","placeholder","Ej: Juan P\xE9rez",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-primary","focus:bg-[#0f172a]","transition-all","font-medium"],[1,"text-red-400","text-xs","mt-1.5","ml-1","flex","items-center","gap-1","font-medium"],["type","text","formControlName","specialty","placeholder","Ej: Senior Frontend Developer",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-primary","focus:bg-[#0f172a]","transition-all","font-medium"],[1,"relative","group","mb-3"],["type","text","placeholder","Escribe y presiona Enter (Ej: React, AWS, Docker)",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-primary","focus:bg-[#0f172a]","transition-all","placeholder:text-gray-600","rounded-xl","font-medium",3,"keydown.enter","formControl"],[1,"flex","flex-wrap","gap-2","min-h-[60px]","p-4","bg-[#0f172a]/30","rounded-xl","border","border-white/5","shadow-inner"],[1,"flex","flex-col","items-center","justify-center","w-full","text-gray-500","py-2"],[1,"badge","badge-lg","gap-2","pl-3","pr-2","py-4","bg-primary/10","text-primary-content","border","border-primary/20","backdrop-blur-md","shadow-lg","shadow-primary/5","transition-all","hover:scale-105","group/chip"],["formControlName","description","placeholder","Escribe un breve resumen...",1,"textarea","h-32","bg-[#0f172a]/50","border-white/10","text-white","w-full","focus:border-primary","focus:bg-[#0f172a]","transition-all","placeholder:text-gray-600","rounded-xl","text-base","resize-none"],[1,"mt-6","space-y-3"],["role","alert",1,"alert","bg-green-500/10","border-green-500/20","text-green-200","shadow-lg","flex","items-center","gap-3","rounded-xl","animate-fade-in"],["role","alert",1,"alert","bg-red-500/10","border-red-500/20","text-red-200","shadow-lg","flex","items-center","gap-3","rounded-xl","animate-shake"],[1,"card-actions","justify-end","mt-8","border-t","border-white/5","pt-6"],["type","submit",1,"btn","btn-primary","w-full","md:w-auto","px-10","border-0","from-primary","to-secondary","shadow-lg","shadow-primary/30","hover:shadow-primary/50","hover:scale-[1.02]","transition-all","duration-300","rounded-xl","font-bold","text-lg",3,"disabled"],[1,"loading","loading-spinner"],[1,"text-4xl","font-bold"],[1,"text-2xl","opacity-50","mb-1"],[1,"text-xs","italic"],[1,"font-bold","text-sm"],["type","button",1,"btn","btn-ghost","btn-xs","btn-circle","text-primary/70","hover:text-white","hover:bg-red-500","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,t){if(e&1){let m=U();i(0,"div",1),s(1,"div",2),i(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),b(),i(6,"svg",7),s(7,"path",8),n()(),w(),i(8,"h2",9),l(9," Tu Perfil Profesional "),n(),i(10,"p",10),l(11,"Personaliza c\xF3mo te ven otros desarrolladores"),n()(),i(12,"form",11),_("ngSubmit",function(){return v(m),x(t.saveProfile())}),i(13,"div",12)(14,"input",13,0),_("change",function(C){return v(m),x(t.onFileSelected(C))}),n(),i(16,"div",14),_("click",function(){v(m);let C=I(15);return x(C.click())}),s(17,"div",15),i(18,"div",16)(19,"div",17),c(20,ee,1,1,"img",18)(21,te,1,1,"img",19)(22,ie,3,1,"div",20),i(23,"div",21),b(),i(24,"svg",22),s(25,"path",23)(26,"path",24),n(),w(),i(27,"span",25),l(28,"Cambiar"),n()()()(),i(29,"div",26),b(),i(30,"svg",27),s(31,"path",28),n()()()(),w(),i(32,"div",29)(33,"div",30)(34,"label",31)(35,"span",32),l(36,"Nombre Completo"),n()(),i(37,"div",33)(38,"span",34),l(39,"\u{1F464}"),n(),s(40,"input",35),n(),c(41,re,3,1,"div",36),n(),i(42,"div",30)(43,"label",31)(44,"span",32),l(45,"Especialidad"),n()(),i(46,"div",33)(47,"span",34),l(48,"\u{1F4BC}"),n(),s(49,"input",37),n(),c(50,ne,3,1,"div",36),n(),i(51,"div",30)(52,"label",31)(53,"span",32),l(54,"Tecnolog\xEDas & Herramientas"),n()(),i(55,"div",38)(56,"span",34),l(57,"\u26A1"),n(),i(58,"input",39),_("keydown.enter",function(C){return v(m),x(t.addSkill(C))}),n()(),i(59,"div",40),c(60,oe,5,0,"div",41),N(61,ae,5,1,"div",42,L),n()(),i(63,"div",30)(64,"label",31)(65,"span",32),l(66,"Descripci\xF3n Profesional"),n()(),s(67,"textarea",43),c(68,le,3,1,"div",36),n()(),i(69,"div",44),c(70,se,5,1,"div",45),c(71,me,5,1,"div",46),n(),i(72,"div",47)(73,"button",48),c(74,de,1,0,"span",49),l(75," Guardar Cambios "),n()()()()()()}if(e&2){let m;a(12),y("formGroup",t.profileForm),a(8),u(t.previewUrl()?20:(m=t.profileForm.get("photoURL"))!=null&&m.value?21:22),a(20),k("input-error",t.formUtils.isValidField(t.profileForm,"displayName")),a(),u(t.formUtils.isValidField(t.profileForm,"displayName")?41:-1),a(8),k("input-error",t.formUtils.isValidField(t.profileForm,"specialty")),a(),u(t.formUtils.isValidField(t.profileForm,"specialty")?50:-1),a(8),y("formControl",t.skillInputCtrl),a(2),u(t.skills().length===0?60:-1),a(),T(t.skills()),a(6),k("textarea-error",t.formUtils.isValidField(t.profileForm,"description")),a(),u(t.formUtils.isValidField(t.profileForm,"description")?68:-1),a(2),u(t.successMessage()?70:-1),a(),u(t.errorMessage()?71:-1),a(2),y("disabled",t.loading()),a(),u(t.loading()?74:-1)}},dependencies:[R,K,B,z,A,H,$,O,q],encapsulation:2,changeDetection:0})};export{Y as ProgrammerPage};
