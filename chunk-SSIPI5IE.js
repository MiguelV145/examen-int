import{a as G,b as u,c as I,d as F,e as V,f as T,g as N,k as H,l as P,m as z}from"./chunk-KG3GVQ5X.js";import{Aa as t,Ba as i,Ca as r,F as p,L as d,La as h,M as m,Na as v,Qa as x,Sa as s,T as w,Ta as b,da as S,ea as l,gb as _,la as E,qb as C,rb as L,ta as g,va as c,vb as k,xb as M,za as f}from"./chunk-BDC6CHW4.js";function O(a,e){if(a&1&&(t(0,"div",13),d(),t(1,"svg",44),r(2,"path",45),i(),m(),t(3,"span",46),s(4),i()()),a&2){let n=v();l(4),b(n.errorMessage())}}function j(a,e){if(a&1&&(t(0,"div",23),d(),t(1,"svg",47),r(2,"path",48),i(),m(),t(3,"span"),s(4),i()()),a&2){let n=v();l(4),b(n.formUtils.getFieldError(n.loginForm,"email"))}}function U(a,e){if(a&1&&(t(0,"div",23),d(),t(1,"svg",47),r(2,"path",48),i(),m(),t(3,"span"),s(4),i()()),a&2){let n=v();l(4),b(n.formUtils.getFieldError(n.loginForm,"password"))}}function R(a,e){a&1&&r(0,"span",28)}function A(a,e){a&1&&(s(0," Iniciar Sesi\xF3n "),d(),t(1,"svg",49),r(2,"path",50),i())}var D=class a{fb=p(H);authService=p(M);router=p(C);loading=w(!1);errorMessage=w(null);loginForm;formUtils=z;isLoggingIn=!1;constructor(){this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]]})}ngOnInit(){this.loadGoogleSignInScript()}unloadNotification(e){this.isLoggingIn&&(e.returnValue=!0)}onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoggingIn=!0,this.loading.set(!0),this.errorMessage.set(null);let{email:e,password:n}=this.loginForm.value;this.authService.login(e,n).subscribe({next:()=>{this.isLoggingIn=!1,this.loading.set(!1),this.router.navigate(["/home"])},error:o=>{this.isLoggingIn=!1,this.loading.set(!1),this.errorMessage.set(this.getErrorMessage(o))}})}onGoogleLogin(){this.loading()||google?.accounts?.id?.signIn()}loadGoogleSignInScript(){if(document.querySelector('script[src*="google"]'))google?.accounts?.id&&this.initializeGoogleSignIn();else{let e=document.createElement("script");e.src="https://accounts.google.com/gsi/client",e.async=!0,e.defer=!0,e.onload=()=>this.initializeGoogleSignIn(),document.head.appendChild(e)}}initializeGoogleSignIn(){try{if(!google?.accounts?.id){console.warn("Google Sign-In script not loaded yet");return}let e="YOUR_GOOGLE_CLIENT_ID";if(e==="YOUR_GOOGLE_CLIENT_ID"){console.warn("\u26A0\uFE0F Google Client ID no configurado. Reemplaza YOUR_GOOGLE_CLIENT_ID con el tuyo.");return}google.accounts.id.initialize({client_id:e,callback:n=>this.handleGoogleLogin(n)}),google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"dark",size:"large",width:"100%"}),google.accounts.id.prompt(n=>{n.isNotDisplayed()||n.isSkippedMoment()})}catch(e){console.error("Error initializing Google Sign-In:",e)}}handleGoogleLogin(e){if(!e.credential){this.errorMessage.set("Error al autenticar con Google. Por favor, intenta de nuevo.");return}this.isLoggingIn=!0,this.loading.set(!0),this.errorMessage.set(null),this.authService.loginWithGoogle(e.credential).subscribe({next:()=>{this.isLoggingIn=!1,this.loading.set(!1),this.router.navigate(["/home"])},error:n=>{this.isLoggingIn=!1,this.loading.set(!1),this.errorMessage.set(this.getErrorMessage(n))}})}getErrorMessage(e){if(e?.status)switch(e.status){case 401:return"Credenciales inv\xE1lidas. Verifica tu usuario/email y contrase\xF1a.";case 400:return e.error?.message||"Datos inv\xE1lidos. Por favor, revisa los campos.";case 404:return"Usuario no encontrado. Por favor, reg\xEDstrate primero.";case 500:return"Error del servidor. Intenta m\xE1s tarde.";default:return e.error?.message||`Error: ${e.statusText||"Error desconocido"}`}return e?.message?.includes("Network")?"Error de conexi\xF3n. Verifica tu conexi\xF3n a internet.":e?.message||"Error desconocido. Intenta de nuevo."}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=E({type:a,selectors:[["app-login-page"]],hostBindings:function(n,o){n&1&&h("beforeunload",function(B){return o.unloadNotification(B)},S)},decls:60,vars:11,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-[#0f172a]","relative","overflow-hidden","font-sans","selection:bg-cyan-500","selection:text-white"],[1,"absolute","inset-0","pointer-events-none"],[1,"absolute","top-[-10%]","left-[-10%]","w-[600px]","h-[600px]","bg-blue-600/20","rounded-full","blur-[120px]","animate-pulse"],[1,"absolute","bottom-[-10%]","right-[-10%]","w-[600px]","h-[600px]","bg-purple-600/20","rounded-full","blur-[120px]"],[1,"card","w-full","max-w-md","bg-[#1e293b]/70","backdrop-blur-2xl","border","border-white/10","shadow-[0_0_50px_rgba(0,0,0,0.5)]","relative","z-10","transition-all","duration-500","hover:shadow-cyan-500/10","rounded-3xl","overflow-hidden"],[1,"absolute","top-0","left-0","w-full","h-1","bg-gradient-to-r","from-transparent","via-cyan-500","to-transparent","opacity-50"],[1,"card-body","p-8","sm:p-10"],[1,"text-center","mb-8"],[1,"inline-flex","items-center","justify-center","w-16","h-16","rounded-2xl","bg-gradient-to-tr","from-cyan-500/20","to-blue-600/20","mb-6","ring-1","ring-white/10","shadow-lg","shadow-cyan-500/20","group"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-8","h-8","text-cyan-400","drop-shadow-md","group-hover:scale-110","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"],[1,"text-3xl","font-black","text-white","tracking-tight","mb-2"],[1,"text-gray-400","text-sm","font-medium"],["role","alert",1,"alert","alert-error","bg-red-500/10","border","border-red-500/20","text-red-200","mb-6","py-3","px-4","rounded-xl","text-sm","flex","items-center","gap-3","animate-bounce-in","shadow-lg","shadow-red-900/20"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"form-control"],[1,"label","pl-1","pb-1"],[1,"label-text","text-gray-400","font-bold","text-xs","uppercase","tracking-wider"],[1,"relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-gray-500","group-focus-within:text-cyan-400","transition-colors","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"],["type","email","formControlName","email","placeholder","nombre@ejemplo.com",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-cyan-500","focus:bg-[#0f172a]","focus:ring-1","focus:ring-cyan-500","transition-all","placeholder:text-gray-600","rounded-xl","font-medium","h-12"],[1,"text-red-400","text-xs","mt-1.5","ml-1","flex","items-center","gap-1","font-medium","animate-fade-in"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-cyan-500","focus:bg-[#0f172a]","focus:ring-1","focus:ring-cyan-500","transition-all","placeholder:text-gray-600","rounded-xl","font-medium","h-12"],[1,"form-control","pt-2"],["type","submit",1,"btn","btn-primary","w-full","border-0","bg-gradient-to-r","from-cyan-600","to-blue-600","hover:from-cyan-500","hover:to-blue-500","shadow-lg","shadow-cyan-500/20","hover:shadow-cyan-500/40","hover:scale-[1.02]","transition-all","duration-300","text-white","font-bold","rounded-xl","h-12","min-h-0","uppercase","tracking-wide","text-sm",3,"disabled"],[1,"loading","loading-spinner","loading-sm"],[1,"relative","my-8"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-white/10"],[1,"relative","flex","justify-center","text-xs","uppercase"],[1,"bg-[#1e293b]","px-3","text-gray-500","font-bold","tracking-wider","rounded-full"],["id","google-signin-button",1,"flex","justify-center"],["type","button",1,"btn","btn-outline","border-white/10","bg-white/5","text-gray-300","w-full","gap-3","hover:bg-white","hover:text-black","hover:border-white","transition-all","rounded-xl","font-medium","h-12","min-h-0","normal-case",2,"display","none",3,"click","disabled"],["viewBox","0 0 24 24",1,"w-5","h-5"],["fill","currentColor","d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["fill","currentColor","d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["fill","currentColor","d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["fill","currentColor","d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],[1,"text-center","mt-8","pt-4","border-t","border-white/5"],[1,"text-sm","text-gray-500"],["routerLink","/register",1,"text-cyan-400","hover:text-cyan-300","font-bold","hover:underline","transition-colors","ml-1","cursor-pointer"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-semibold"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-3","w-3"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","ml-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M14 5l7 7m0 0l-7 7m7-7H3"]],template:function(n,o){n&1&&(t(0,"div",0)(1,"div",1),r(2,"div",2)(3,"div",3),i(),t(4,"div",4),r(5,"div",5),t(6,"div",6)(7,"div",7)(8,"div",8),d(),t(9,"svg",9),r(10,"path",10),i()(),m(),t(11,"h1",11),s(12,"\xA1Bienvenido de nuevo!"),i(),t(13,"p",12),s(14,"Accede a tu panel de control"),i()(),g(15,O,5,1,"div",13),t(16,"form",14),h("ngSubmit",function(){return o.onSubmit()}),t(17,"div",15)(18,"label",16)(19,"span",17),s(20,"Correo electr\xF3nico"),i()(),t(21,"div",18)(22,"span",19),d(),t(23,"svg",20),r(24,"path",21),i()(),m(),r(25,"input",22),i(),g(26,j,5,1,"div",23),i(),t(27,"div",15)(28,"label",16)(29,"span",17),s(30,"Contrase\xF1a"),i()(),t(31,"div",18)(32,"span",19),d(),t(33,"svg",20),r(34,"path",24),i()(),m(),r(35,"input",25),i(),g(36,U,5,1,"div",23),i(),t(37,"div",26)(38,"button",27),g(39,R,1,0,"span",28)(40,A,3,0),i()()(),t(41,"div",29)(42,"div",30),r(43,"div",31),i(),t(44,"div",32)(45,"span",33),s(46,"O contin\xFAa con"),i()()(),r(47,"div",34),t(48,"button",35),h("click",function(){return o.onGoogleLogin()}),d(),t(49,"svg",36),r(50,"path",37)(51,"path",38)(52,"path",39)(53,"path",40),i(),s(54," Cuenta de Google "),i(),m(),t(55,"div",41)(56,"p",42),s(57," \xBFNo tienes cuenta? "),t(58,"a",43),s(59," Reg\xEDstrate aqu\xED "),i()()()()()()),n&2&&(l(15),c(o.errorMessage()?15:-1),l(),f("formGroup",o.loginForm),l(9),x("input-error",o.formUtils.isValidField(o.loginForm,"email")),l(),c(o.formUtils.isValidField(o.loginForm,"email")?26:-1),l(9),x("input-error",o.formUtils.isValidField(o.loginForm,"password")),l(),c(o.formUtils.isValidField(o.loginForm,"password")?36:-1),l(2),f("disabled",o.loading()),l(),c(o.loading()?39:40),l(9),f("disabled",o.loading()))},dependencies:[_,P,V,G,I,F,N,T,k,L],encapsulation:2,changeDetection:0})};export{D as LoginPage};
