import{g as ee,j as te,n as U,q as ie}from"./chunk-7E3ZL7KR.js";import{a as O,b as f,c as J,d as K,e as W,f as $,g as Q,k as X,l as Y,m as Z}from"./chunk-LJBCKGLN.js";import{Aa as i,Ba as r,Ca as d,F as k,Ia as M,J as h,K as v,L as x,La as y,M as b,Na as m,Oa as G,Qa as C,Sa as s,T as w,Ta as S,Ua as P,a as D,b as V,ca as F,ea as l,gb as B,k as T,l as N,la as I,q as L,s as j,ta as p,u as z,va as c,w as E,wa as A,xa as R,xb as q,ya as H,za as _}from"./chunk-RAIKBLXF.js";function ne(n,a){if(n&1&&d(0,"img",18),n&2){let e=m();_("src",e.previewUrl(),F)}}function ae(n,a){if(n&1&&d(0,"img",19),n&2){let e,t=m();_("src",(e=t.profileForm.get("photoURL"))==null?null:e.value,F)}}function oe(n,a){if(n&1&&(i(0,"div",20)(1,"span",50),s(2),r()()),n&2){let e,t=m();l(2),S((e=t.user())==null||e.email==null||(e=e.email.charAt(0))==null?null:e.toUpperCase())}}function le(n,a){if(n&1&&(i(0,"div",36)(1,"span"),s(2),r()()),n&2){let e=m();l(2),P("\u2022 ",e.formUtils.getFieldError(e.profileForm,"displayName"))}}function se(n,a){if(n&1&&(i(0,"div",36)(1,"span"),s(2),r()()),n&2){let e=m();l(2),P("\u2022 ",e.formUtils.getFieldError(e.profileForm,"specialty"))}}function de(n,a){n&1&&(i(0,"div",41)(1,"span",51),s(2,"\u{1F3F7}\uFE0F"),r(),i(3,"span",52),s(4,"A\xF1ade tus mejores habilidades"),r()())}function me(n,a){if(n&1){let e=M();i(0,"div",42)(1,"span",53),s(2),r(),i(3,"button",54),y("click",function(){let o=h(e).$implicit,u=m();return v(u.removeSkill(o))}),s(4,"\u2715"),r()()}if(n&2){let e=a.$implicit;l(2),S(e)}}function pe(n,a){if(n&1&&(i(0,"div",36)(1,"span"),s(2),r()()),n&2){let e=m();l(2),P("\u2022 ",e.formUtils.getFieldError(e.profileForm,"description"))}}function ce(n,a){if(n&1&&(i(0,"div",45),x(),i(1,"svg",55),d(2,"path",56),r(),b(),i(3,"span",57),s(4),r()()),n&2){let e=m();l(4),S(e.successMessage())}}function ue(n,a){if(n&1&&(i(0,"div",46),x(),i(1,"svg",58),d(2,"path",59),r(),b(),i(3,"span",57),s(4),r()()),n&2){let e=m();l(4),S(e.errorMessage())}}function fe(n,a){n&1&&d(0,"span",49)}var re=class n{fb=k(X);authService=k(q);firestore=k(ee);loading=w(!1);successMessage=w("");errorMessage=w("");skills=w([]);previewUrl=w(null);user=this.authService.currentUser;formUtils=Z;profileForm=this.fb.group({displayName:["",[f.required,f.minLength(3)]],specialty:["",[f.required,f.minLength(3)]],description:["",[f.required,f.minLength(10)]],photoURL:[""]});constructor(){}ngOnInit(){this.loadCurrentData()}loadCurrentData(){let a=this.authService.currentUser();if(a&&a.uid){this.loading.set(!0);let e=U(this.firestore,"users",a.uid);te(e).pipe(j(1),E(()=>this.loading.set(!1))).subscribe(t=>{if(t){let o=t;this.profileForm.patchValue({displayName:o.displayName||"",specialty:o.specialty||"",description:o.description||"",photoURL:o.photoURL||""}),o.skills&&Array.isArray(o.skills)&&this.skills.set(o.skills)}})}}addSkill(a){let e=a.target,t=e.value.trim();t&&!this.skills().includes(t)&&(this.skills.update(o=>[...o,t]),e.value="")}removeSkill(a){this.skills.update(e=>e.filter(t=>t!==a))}onFileSelected(a){let e=a.target.files[0];if(e){if(e.size>5e5){alert("La imagen es muy grande (M\xE1x 500KB).");return}let t=new FileReader;t.onload=o=>{let u=o.target?.result;this.previewUrl.set(u),this.profileForm.patchValue({photoURL:u}),this.profileForm.get("photoURL")?.markAsDirty()},t.readAsDataURL(e)}}saveProfile(){if(this.profileForm.invalid){this.profileForm.markAllAsTouched();return}let a=this.authService.currentUser();if(!a||!a.uid)return;this.loading.set(!0),this.successMessage.set(""),this.errorMessage.set("");let e=U(this.firestore,"users",a.uid),t=V(D({},this.profileForm.value),{skills:this.skills(),photoURL:this.profileForm.value.photoURL||""});T(ie(e,t)).pipe(E(()=>{this.successMessage.set("\xA1Perfil actualizado con \xE9xito!"),setTimeout(()=>this.successMessage.set(""),3e3)}),L(o=>(console.error(o),this.errorMessage.set("Error al guardar. Intenta con una imagen m\xE1s liviana."),N(null))),z(()=>this.loading.set(!1))).subscribe()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-programmer-page"]],decls:76,vars:16,consts:[["fileInput",""],[1,"min-h-screen","from-[#0f172a]","via-[#1e293b]","to-[#0f172a]","flex","justify-center","items-center","p-4","lg:p-10","font-sans","relative","overflow-hidden","pb-20"],[1,"absolute","top-0","left-1/2","w-[500px]","h-[500px]","bg-primary/20","rounded-full","blur-[120px]","-translate-x-1/2","-translate-y-1/2","pointer-events-none"],[1,"card","w-full","max-w-3xl","bg-[#1e293b]/40","backdrop-blur-xl","border","border-white/10","shadow-2xl","relative","z-10","animate-fade-in-up"],[1,"card-body","p-8","lg:p-12"],[1,"text-center","mb-10"],[1,"inline-flex","p-3","rounded-2xl","from-primary/20","to-secondary/20","mb-4","border","border-white/5","shadow-lg","shadow-primary/10"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8","text-white"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"text-3xl","md:text-4xl","font-black","text-white","tracking-tight"],[1,"text-gray-400","mt-2","font-medium"],[3,"ngSubmit","formGroup"],[1,"flex","flex-col","items-center","mb-10"],["type","file","accept","image/png, image/jpeg, image/jpg",1,"hidden",3,"change"],["title","Clic para actualizar foto",1,"relative","group","cursor-pointer",3,"click"],[1,"absolute","-inset-1","from-primary","to-secondary","rounded-full","blur","opacity-20","group-hover:opacity-75","transition","duration-500"],[1,"avatar","placeholder","relative","z-10"],[1,"w-36","h-36","rounded-full","ring-4","ring-[#1e293b]","overflow-hidden","shadow-2xl","transition-transform","duration-300","group-hover:scale-[1.02]"],["alt","Preview",1,"object-cover","w-full","h-full",3,"src"],["alt","Foto Actual",1,"object-cover","w-full","h-full",3,"src"],[1,"from-gray-700","to-gray-900","text-white","w-full","h-full","flex","items-center","justify-center"],[1,"absolute","inset-0","bg-black/60","flex","flex-col","items-center","justify-center","opacity-0","group-hover:opacity-100","transition-all","duration-300","backdrop-blur-sm"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8","text-white","mb-1","transform","translate-y-2","group-hover:translate-y-0","transition-transform","duration-300"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-white","text-xs","font-bold","tracking-widest","uppercase","transform","translate-y-2","group-hover:translate-y-0","transition-transform","duration-300","delay-75"],[1,"absolute","bottom-2","right-2","bg-primary","text-white","p-2","rounded-full","shadow-lg","border-2","border-[#1e293b]","z-20","group-hover:scale-110","transition-transform"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4"],["d","M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"],[1,"grid","gap-6"],[1,"form-control"],[1,"label","pl-1","pt-0"],[1,"label-text","text-gray-400","font-bold","text-xs","uppercase","tracking-wider"],[1,"relative","group"],[1,"absolute","left-4","top-1/2","-translate-y-1/2","text-gray-500","group-focus-within:text-primary","transition-colors"],["type","text","formControlName","displayName","placeholder","Ej: Juan P\xE9rez",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-primary","focus:bg-[#0f172a]","transition-all","font-medium"],[1,"text-red-400","text-xs","mt-1.5","ml-1","flex","items-center","gap-1","font-medium"],["type","text","formControlName","specialty","placeholder","Ej: Senior Frontend Developer",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-primary","focus:bg-[#0f172a]","transition-all","font-medium"],[1,"relative","group","mb-3"],["type","text","placeholder","Escribe y presiona Enter (Ej: React, AWS, Docker)",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-primary","focus:bg-[#0f172a]","transition-all","placeholder:text-gray-600","rounded-xl","font-medium",3,"keydown.enter"],[1,"flex","flex-wrap","gap-2","min-h-[60px]","p-4","bg-[#0f172a]/30","rounded-xl","border","border-white/5","shadow-inner"],[1,"flex","flex-col","items-center","justify-center","w-full","text-gray-500","py-2"],[1,"badge","badge-lg","gap-2","pl-3","pr-2","py-4","bg-primary/10","text-primary-content","border","border-primary/20","backdrop-blur-md","shadow-lg","shadow-primary/5","transition-all","hover:scale-105","group/chip"],["formControlName","description","placeholder","Escribe un breve resumen...",1,"textarea","h-32","bg-[#0f172a]/50","border-white/10","text-white","w-full","focus:border-primary","focus:bg-[#0f172a]","transition-all","placeholder:text-gray-600","rounded-xl","text-base","resize-none"],[1,"mt-6","space-y-3"],["role","alert",1,"alert","bg-green-500/10","border-green-500/20","text-green-200","shadow-lg","flex","items-center","gap-3","rounded-xl","animate-fade-in"],["role","alert",1,"alert","bg-red-500/10","border-red-500/20","text-red-200","shadow-lg","flex","items-center","gap-3","rounded-xl","animate-shake"],[1,"card-actions","justify-end","mt-8","border-t","border-white/5","pt-6"],["type","submit",1,"btn","btn-primary","w-full","md:w-auto","px-10","border-0","from-primary","to-secondary","shadow-lg","shadow-primary/30","hover:shadow-primary/50","hover:scale-[1.02]","transition-all","duration-300","rounded-xl","font-bold","text-lg",3,"disabled"],[1,"loading","loading-spinner"],[1,"text-4xl","font-bold"],[1,"text-2xl","opacity-50","mb-1"],[1,"text-xs","italic"],[1,"font-bold","text-sm"],["type","button",1,"btn","btn-ghost","btn-xs","btn-circle","text-primary/70","hover:text-white","hover:bg-red-500","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-green-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-medium"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(e,t){if(e&1){let o=M();i(0,"div",1),d(1,"div",2),i(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6),x(),i(6,"svg",7),d(7,"path",8),r()(),b(),i(8,"h2",9),s(9," Tu Perfil Profesional "),r(),i(10,"p",10),s(11,"Personaliza c\xF3mo te ven otros desarrolladores"),r()(),i(12,"form",11),y("ngSubmit",function(){return h(o),v(t.saveProfile())}),i(13,"div",12)(14,"input",13,0),y("change",function(g){return h(o),v(t.onFileSelected(g))}),r(),i(16,"div",14),y("click",function(){h(o);let g=G(15);return v(g.click())}),d(17,"div",15),i(18,"div",16)(19,"div",17),p(20,ne,1,1,"img",18)(21,ae,1,1,"img",19)(22,oe,3,1,"div",20),i(23,"div",21),x(),i(24,"svg",22),d(25,"path",23)(26,"path",24),r(),b(),i(27,"span",25),s(28,"Cambiar"),r()()()(),i(29,"div",26),x(),i(30,"svg",27),d(31,"path",28),r()()()(),b(),i(32,"div",29)(33,"div",30)(34,"label",31)(35,"span",32),s(36,"Nombre Completo"),r()(),i(37,"div",33)(38,"span",34),s(39,"\u{1F464}"),r(),d(40,"input",35),r(),p(41,le,3,1,"div",36),r(),i(42,"div",30)(43,"label",31)(44,"span",32),s(45,"Especialidad"),r()(),i(46,"div",33)(47,"span",34),s(48,"\u{1F4BC}"),r(),d(49,"input",37),r(),p(50,se,3,1,"div",36),r(),i(51,"div",30)(52,"label",31)(53,"span",32),s(54,"Tecnolog\xEDas & Herramientas"),r()(),i(55,"div",38)(56,"span",34),s(57,"\u26A1"),r(),i(58,"input",39),y("keydown.enter",function(g){return h(o),g.preventDefault(),v(t.addSkill(g))}),r()(),i(59,"div",40),p(60,de,5,0,"div",41),R(61,me,5,1,"div",42,A),r()(),i(63,"div",30)(64,"label",31)(65,"span",32),s(66,"Descripci\xF3n Profesional"),r()(),d(67,"textarea",43),p(68,pe,3,1,"div",36),r()(),i(69,"div",44),p(70,ce,5,1,"div",45),p(71,ue,5,1,"div",46),r(),i(72,"div",47)(73,"button",48),p(74,fe,1,0,"span",49),s(75," Guardar Cambios "),r()()()()()()}if(e&2){let o;l(12),_("formGroup",t.profileForm),l(8),c(t.previewUrl()?20:(o=t.profileForm.get("photoURL"))!=null&&o.value?21:22),l(20),C("input-error",t.formUtils.isValidField(t.profileForm,"displayName")),l(),c(t.formUtils.isValidField(t.profileForm,"displayName")?41:-1),l(8),C("input-error",t.formUtils.isValidField(t.profileForm,"specialty")),l(),c(t.formUtils.isValidField(t.profileForm,"specialty")?50:-1),l(10),c(t.skills().length===0?60:-1),l(),H(t.skills()),l(6),C("textarea-error",t.formUtils.isValidField(t.profileForm,"description")),l(),c(t.formUtils.isValidField(t.profileForm,"description")?68:-1),l(2),c(t.successMessage()?70:-1),l(),c(t.errorMessage()?71:-1),l(2),_("disabled",t.loading()),l(),c(t.loading()?74:-1)}},dependencies:[B,Y,W,O,J,K,Q,$],encapsulation:2,changeDetection:0})};export{re as ProgrammerPage};
