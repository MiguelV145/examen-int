import{a as I}from"./chunk-B6QT5BOB.js";import{a as G}from"./chunk-N7LSAEK4.js";import{c as _,d as k,j as M}from"./chunk-7TQHRDDG.js";import{a as D,b as p,c as R,d as P,g as V,i as N,j as A,n as T,p as U}from"./chunk-G2VJRUEM.js";import{Ca as C,Na as m,P as c,Pa as u,Qb as F,Ta as E,Ua as r,V as h,Va as e,W as w,Wa as d,da as b,db as S,fb as g,lb as v,nb as a,ob as y,pb as x,ra as s}from"./chunk-UHECLRXO.js";function L(n,t){if(n&1&&(r(0,"div",11),h(),r(1,"svg",34),d(2,"path",35),e(),w(),r(3,"span",36),a(4),e()()),n&2){let o=g();s(4),y(o.errorMessage())}}function q(n,t){if(n&1&&(r(0,"div",19)(1,"span"),a(2),e()()),n&2){let o=g();s(2),x("\u2022 ",o.formUtils.getFieldError(o.registerForm,"email"))}}function B(n,t){if(n&1&&(r(0,"div",19)(1,"span"),a(2),e()()),n&2){let o=g();s(2),x("\u2022 ",o.formUtils.getFieldError(o.registerForm,"password"))}}function z(n,t){if(n&1&&(r(0,"div",19)(1,"span"),a(2),e()()),n&2){let o=g();s(2),x("\u2022 ",o.formUtils.getFieldError(o.registerForm,"passwordConfirm"))}}function H(n,t){n&1&&(d(0,"span",37),a(1," Creando cuenta... "))}function Y(n,t){n&1&&(a(0," Crear Cuenta "),h(),r(1,"svg",38),d(2,"path",39),e())}function $(n,t){n&1&&(r(0,"p",26),a(1," \u23F3 Esto puede tardar hasta 60 segundos si el servidor est\xE1 inici\xE1ndose... "),e())}var j=class n{fb=c(T);authApiService=c(G);authStore=c(M);router=c(_);loading=b(!1);errorMessage=b(null);registerForm;formUtils=I;constructor(){this.registerForm=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],passwordConfirm:["",[p.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(t){let o=t.get("password"),i=t.get("passwordConfirm");return o&&i&&o.value!==i.value?(i.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}onSubmit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}this.loading.set(!0),this.errorMessage.set(null);let{email:t,password:o}=this.registerForm.value,i={email:t,password:o};console.log("\u{1F4E4} Enviando al backend:",i),console.log("\u{1F4DD} Email:",t),console.log("\u{1F4DD} Password length:",o?.length),console.log("\u23F3 Nota: Si es la primera petici\xF3n, Render puede tardar 30-60 segundos en despertar..."),this.authApiService.register(i).subscribe({next:l=>{console.log("\u2705 Respuesta del registro:",l),l.token&&l.userId?(this.authStore.setAuth(l),this.loading.set(!1),this.router.navigate(["/home"])):(console.log("\u{1F4DD} Registro exitoso, iniciando sesi\xF3n autom\xE1tica..."),this.authApiService.login({email:t,password:o}).subscribe({next:f=>{console.log("\u2705 Login autom\xE1tico exitoso:",f),this.authStore.setAuth(f),this.loading.set(!1),this.router.navigate(["/home"])},error:f=>{console.error("\u274C Error en login autom\xE1tico:",f),this.loading.set(!1),this.router.navigate(["/login"],{queryParams:{registered:"true",message:"Registro exitoso. Por favor inicia sesi\xF3n."}})}}))},error:l=>{this.loading.set(!1),console.error("\u274C Error completo del backend:",l),console.error("\u274C Status:",l.status),console.error("\u274C Error body:",l.error),console.error("\u274C Message:",l.error?.message),this.errorMessage.set(this.getErrorMessage(l))}})}getErrorMessage(t){if(typeof t.error=="string")return t.error;if(t?.status)switch(t.status){case 400:return t.error?.message||"Email inv\xE1lido o contrase\xF1a muy corta (m\xEDn 6 caracteres).";case 409:return"Este correo ya est\xE1 registrado. Intenta con otro o ve a login.";case 500:return"Error del servidor. Intenta m\xE1s tarde.";default:return t.error?.message||`Error: ${t.statusText||"Error desconocido"}`}return t?.message?.includes("Network")?"Error de conexi\xF3n. Verifica tu conexi\xF3n a internet.":t?.message||"Error en el registro. Intenta de nuevo."}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=C({type:n,selectors:[["app-register-page"]],decls:56,vars:14,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-br","from-[#0f172a]","via-[#1e293b]","to-[#0f172a]","p-4","relative","overflow-hidden","font-sans"],["aria-hidden","true",1,"absolute","top-0","right-1/4","w-96","h-96","bg-violet-600/20","rounded-full","blur-[120px]","-translate-y-1/2","pointer-events-none","animate-pulse"],["aria-hidden","true",1,"absolute","bottom-0","left-1/4","w-96","h-96","bg-primary/10","rounded-full","blur-[120px]","translate-y-1/2","pointer-events-none"],[1,"card","w-full","max-w-md","bg-[#1e293b]/40","backdrop-blur-xl","border","border-white/10","shadow-2xl","relative","z-10","transition-all","duration-500","hover:shadow-violet-500/5"],[1,"card-body","p-8","sm:p-10"],[1,"text-center","mb-6"],[1,"inline-flex","items-center","justify-center","w-16","h-16","rounded-2xl","bg-gradient-to-tr","from-violet-600/20","to-primary/20","mb-4","ring-1","ring-white/10","shadow-lg","shadow-violet-500/10"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"w-8","h-8","text-white","drop-shadow-md"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"],[1,"text-3xl","font-black","text-white","tracking-tight"],[1,"text-gray-400","text-sm","mt-2","font-medium"],["role","alert",1,"alert","alert-error","bg-red-500/10","border","border-red-500/20","text-red-200","mb-6","py-3","px-4","rounded-xl","text-sm","flex","items-center","gap-3","animate-bounce-in"],["novalidate","",1,"space-y-5",3,"ngSubmit","formGroup"],[1,"form-control"],["for","email",1,"label","pl-1","pt-0"],[1,"label-text","text-gray-300","font-bold","text-xs","uppercase","tracking-wider"],[1,"relative","group"],["aria-hidden","true",1,"absolute","left-4","top-1/2","-translate-y-1/2","text-gray-500","group-focus-within:text-violet-400","transition-colors"],["id","email","type","email","autocomplete","username","placeholder","ejemplo@correo.com","formControlName","email",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-violet-500","focus:bg-[#0f172a]","transition-all","placeholder:text-gray-600","rounded-xl"],["aria-live","polite",1,"text-red-400","text-xs","mt-1.5","ml-1","flex","items-center","gap-1","font-medium","animate-fade-in"],["for","password",1,"label","pl-1","pt-0"],["id","password","type","password","autocomplete","new-password","placeholder","******","formControlName","password",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-violet-500","focus:bg-[#0f172a]","transition-all","placeholder:text-gray-600","rounded-xl"],["for","passwordConfirm",1,"label","pl-1","pt-0"],["id","passwordConfirm","type","password","autocomplete","new-password","placeholder","******","formControlName","passwordConfirm",1,"input","bg-[#0f172a]/50","border-white/10","text-white","w-full","pl-11","focus:border-violet-500","focus:bg-[#0f172a]","transition-all","placeholder:text-gray-600","rounded-xl"],[1,"form-control","mt-6"],["type","submit",1,"btn","btn-primary","w-full","border-0","bg-gradient-to-r","from-violet-600","to-primary","hover:shadow-lg","hover:shadow-violet-600/30","hover:scale-[1.02]","transition-all","duration-300","text-neutral-900","font-bold","rounded-xl","h-12","min-h-0",3,"disabled"],[1,"text-xs","text-gray-400","mt-2","text-center"],[1,"relative","my-8"],["aria-hidden","true",1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-white/10"],[1,"relative","flex","justify-center","text-xs","uppercase"],[1,"bg-[#1b2638]","px-3","text-gray-500","font-bold","tracking-wider"],[1,"text-center"],["routerLink","/login",1,"btn","btn-ghost","btn-sm","text-violet-400","hover:text-white","hover:bg-white/5","font-semibold","gap-2"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"font-semibold"],[1,"loading","loading-spinner","loading-sm"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","ml-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7l5 5m0 0l-5 5m5-5H6"]],template:function(o,i){o&1&&(r(0,"main",0),d(1,"div",1)(2,"div",2),r(3,"section",3)(4,"div",4)(5,"header",5)(6,"div",6),h(),r(7,"svg",7),d(8,"path",8),e()(),w(),r(9,"h1",9),a(10,"Crear Cuenta"),e(),r(11,"p",10),a(12,"\xDAnete a nuestro portafolio de talentos"),e()(),m(13,L,5,1,"div",11),r(14,"form",12),S("ngSubmit",function(){return i.onSubmit()}),r(15,"div",13)(16,"label",14)(17,"span",15),a(18,"Correo Electr\xF3nico"),e()(),r(19,"div",16)(20,"span",17),a(21,"\u{1F4E7}"),e(),d(22,"input",18),e(),m(23,q,3,1,"div",19),e(),r(24,"div",13)(25,"label",20)(26,"span",15),a(27,"Contrase\xF1a"),e()(),r(28,"div",16)(29,"span",17),a(30,"\u{1F512}"),e(),d(31,"input",21),e(),m(32,B,3,1,"div",19),e(),r(33,"div",13)(34,"label",22)(35,"span",15),a(36,"Confirmar Contrase\xF1a"),e()(),r(37,"div",16)(38,"span",17),a(39,"\u{1F510}"),e(),d(40,"input",23),e(),m(41,z,3,1,"div",19),e(),r(42,"div",24)(43,"button",25),m(44,H,2,0)(45,Y,3,0),e(),m(46,$,2,0,"p",26),e()(),r(47,"div",27)(48,"div",28),d(49,"div",29),e(),r(50,"div",30)(51,"span",31),a(52,"\xBFYa tienes cuenta?"),e()()(),r(53,"div",32)(54,"a",33),a(55," Inicia Sesi\xF3n aqu\xED "),e()()()()()),o&2&&(s(13),u(i.errorMessage()?13:-1),s(),E("formGroup",i.registerForm),s(8),v("input-error",i.formUtils.isValidField(i.registerForm,"email")),s(),u(i.formUtils.isValidField(i.registerForm,"email")?23:-1),s(8),v("input-error",i.formUtils.isValidField(i.registerForm,"password")),s(),u(i.formUtils.isValidField(i.registerForm,"password")?32:-1),s(8),v("input-error",i.formUtils.isValidField(i.registerForm,"passwordConfirm")),s(),u(i.formUtils.isValidField(i.registerForm,"passwordConfirm")?41:-1),s(2),E("disabled",i.loading()),s(),u(i.loading()?44:45),s(2),u(i.loading()?46:-1))},dependencies:[F,U,V,D,R,P,A,N,k],encapsulation:2,changeDetection:0})};export{j as RegisterPage};
