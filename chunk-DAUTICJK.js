import{a as p}from"./chunk-O7SNSOSJ.js";import{c as l,i as m}from"./chunk-QXBNBJ37.js";import{Bb as c,F as u,J as h,O as o,l as n,w as s}from"./chunk-EH3YIYIB.js";var g=class i{authApi=o(p);authStore=o(m);router=o(l);currentUser=c(()=>this.authStore.user());constructor(){}login(t,r){let a=(t||"").trim();return!a||!r?n(()=>new Error("Email y contrase\xF1a son requeridos")):this.authApi.login({email:a,password:r}).pipe(u(e=>{this.authStore.setAuth(e),console.log("\u2705 Login exitoso mediante AuthService")}),s(e=>(console.error("\u274C Error en login:",e),n(()=>e))))}isAuthenticated(){return this.authStore.isAuthenticated()}getToken(){return this.authStore.token()}logout(){this.authStore.logout()}hasRole(t){return this.authStore.hasRole(t)}isAdmin(){return this.authStore.isAdmin()}static \u0275fac=function(r){return new(r||i)};static \u0275prov=h({token:i,factory:i.\u0275fac,providedIn:"root"})};export{g as a};
