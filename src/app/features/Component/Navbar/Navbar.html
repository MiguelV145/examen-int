<div class="navbar bg-base-100 drop-shadow-md px-4 sticky top-0 z-50">
  
  <div class="flex-1">
    <a routerLink="/" class="btn btn-ghost text-xl font-bold text-primary">
      Portafolio
    </a>
  </div>

  <div class="flex gap-2 items-center">

    @if (authService.currentUser()) {
      
      <nav class="hidden md:flex gap-2 mr-2">
        <a routerLink="/home" class="btn btn-ghost btn-sm">Inicio</a>
      </nav>

      <div class="dropdown dropdown-end">
        
        <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar ring ring-primary ring-offset-base-100 ring-offset-2">
          
          @if (authService.currentUser()?.photoURL) {
            <div class="w-10 rounded-full">
              <img [src]="authService.currentUser()?.photoURL" alt="Perfil" />
            </div>
          } 
          @else {
            <div class="w-10 rounded-full bg-neutral text-neutral-content flex items-center justify-center">
              <span class="text-xl font-bold">
                {{ authService.currentUser()?.email?.charAt(0)?.toUpperCase() }}
              </span>
            </div>
          }

        </div>

        <ul
          tabindex="-1"
          class="menu menu-sm dropdown-content bg-base-100 rounded-box z-[1] mt-3 w-52 p-2 shadow border border-base-200">
          
          <li class="menu-title px-4 py-2 text-primary font-bold border-b border-base-200 mb-2">
            {{ authService.currentUser()?.displayName || authService.currentUser()?.email }}
          </li>

          <li>
            <a routerLink="/home" routerLinkActive="bg-primary text-primary-content">
               Home
            </a>
          </li>
          
          @if (authService.hasRole('Programador') || authService.hasRole('admin')) {
             <li>
              <a routerLink="/panel" class="justify-between" routerLinkActive="bg-primary text-primary-content">
                Mi Panel
                <span class="badge badge-sm badge-secondary">Dev</span>
              </a>
            </li>
          }
          
          @if (authService.hasRole('admin')) {
            <li>
              <a routerLink="/admin" routerLinkActive="bg-primary text-primary-content">
                 Panel Admin
              </a>
            </li>
          }
          
          <div class="divider my-0"></div>

          <li>
            <button (click)="logout()" class="text-error font-semibold hover:bg-error/10">
              Cerrar Sesión
            </button>
          </li>
        </ul>
      </div>

    } @else {
      
      <div class="flex gap-2">
        <a routerLink="/login" class="btn btn-primary btn-sm">
          Iniciar Sesión
        </a>
        <a routerLink="/register" class="btn btn-ghost btn-sm hidden sm:inline-flex">
          Registrarse
        </a>
      </div>

    }

  </div>
</div>